{"version":3,"sources":["js/index.js"],"names":["leftJoystick","document","querySelector","rightJoystick","CIR_OFFSET_X","CIR_OFFSET_Y","leftJoy","x","getBoundingClientRect","left","y","top","LEFT_ORIGIN_JOY","rightJoy","RIGHT_ORIGIN_JOY","mouse","thumb","mouseMove","e","update","clientX","clientY","requestAnimationFrame","addMouseMove","addEventListener","updateLeft","updateRight","removeEventListener","updateJoy","RANGE","ROTATE_RANGE","offsetX","offsetY","rotateY","rotateX","console","log","style","transform"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"../src","sourcesContent":["const leftJoystick = document.querySelector('.left-joycon .joystick');\nconst rightJoystick = document.querySelector('.right-joycon .joystick');\n\nconst CIR_OFFSET_X = 35.5;\nconst CIR_OFFSET_Y = 40;\nconst leftJoy = { x: leftJoystick.getBoundingClientRect().left + CIR_OFFSET_X, y: leftJoystick.getBoundingClientRect().top + CIR_OFFSET_Y };\nconst LEFT_ORIGIN_JOY = leftJoy;\nconst rightJoy = { x: rightJoystick.getBoundingClientRect().left + CIR_OFFSET_X, y: rightJoystick.getBoundingClientRect().top + CIR_OFFSET_Y };\nconst RIGHT_ORIGIN_JOY = rightJoy;\nconst mouse = { x: 0, y: 0 };\nlet thumb = false;\n\nconst mouseMove = (e, update) => {\n\tmouse.x = e.clientX;\n\tmouse.y = e.clientY;\n\trequestAnimationFrame(update);\n};\n\nconst addMouseMove = () => {\n\tthumb = true;\n\tleftJoystick.addEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trightJoystick.addEventListener('mousemove', (e) => mouseMove(e, updateRight));\n};\n\nleftJoystick.addEventListener('mousedown', addMouseMove);\nrightJoystick.addEventListener('mousedown', addMouseMove);\n\nleftJoystick.addEventListener('mouseup', () => {\n\tthumb = false;\n\tleftJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trequestAnimationFrame(updateLeft);\n});\n\nrightJoystick.addEventListener('mouseup', () => {\n\tthumb = false;\n\trightJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateRight));\n\trequestAnimationFrame(updateRight);\n});\n\nleftJoystick.addEventListener('mouseout', () => {\n\tthumb = false;\n\tleftJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trequestAnimationFrame(updateLeft);\n});\n\nrightJoystick.addEventListener('mouseout', () => {\n\tthumb = false;\n\trightJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateRight));\n\trequestAnimationFrame(updateRight);\n});\n\nfunction updateJoy () {\n\tleftJoy.x = leftJoystick.getBoundingClientRect().left + CIR_OFFSET_X;\n\tleftJoy.y = leftJoystick.getBoundingClientRect().top + CIR_OFFSET_Y;\n\trightJoy.x = rightJoystick.getBoundingClientRect().left + CIR_OFFSET_X;\n\trightJoy.y = rightJoystick.getBoundingClientRect().top + CIR_OFFSET_Y;\n}\n\nconst RANGE = 2;\nconst ROTATE_RANGE = 2.5;\n\nfunction updateLeft () {\n\tif (thumb) {\n\t\tconst offsetX = (leftJoy.x - mouse.x) / -RANGE;\n\t\tconst offsetY = (leftJoy.y - mouse.y) / -RANGE;\n\t\tconst rotateY = offsetX * ROTATE_RANGE;\n\t\tconst rotateX = offsetY * -ROTATE_RANGE;\n\t\tconsole.log('y:', rotateX, 'x:', rotateY);\n\t\tleftJoystick.style.transform = `translateX(${offsetX}px) translateY(${offsetY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) perspective(5000rem)`;\n\n\t\tupdateJoy();\n\t} else {\n\t\tleftJoystick.style.transform = '';\n\t\tleftJoy.x = LEFT_ORIGIN_JOY.x;\n\t\tleftJoy.y = LEFT_ORIGIN_JOY.y;\n\t}\n}\n\nfunction updateRight () {\n\tif (thumb) {\n\t\tconst offsetX = -(rightJoy.x - mouse.x) / RANGE;\n\t\tconst offsetY = -(rightJoy.y - mouse.y) / RANGE;\n\t\tconst rotateY = offsetX * ROTATE_RANGE;\n\t\tconst rotateX = offsetY * -ROTATE_RANGE;\n\t\tconsole.log('y:', rotateX, 'x:', rotateY);\n\t\trightJoystick.style.transform = `translateX(${offsetX}px) translateY(${offsetY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) perspective(5000rem)`;\n\t\tupdateJoy();\n\t} else {\n\t\trightJoystick.style.transform = '';\n\t\trightJoy.x = RIGHT_ORIGIN_JOY.x;\n\t\trightJoy.y = RIGHT_ORIGIN_JOY.y;\n\t}\n}\n"]}