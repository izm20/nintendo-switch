{"version":3,"sources":["js/index.js"],"names":["leftJoystick","document","querySelector","rightJoystick","CIR_OFFSET_X","CIR_OFFSET_Y","leftJoy","x","getBoundingClientRect","left","y","top","LEFT_ORIGIN_JOY","rightJoy","RIGHT_ORIGIN_JOY","mouse","thumb","mouseMove","e","update","clientX","clientY","requestAnimationFrame","addMouseMove","addEventListener","updateLeft","updateRight","updateJoy","removeEventListener","RANGE","ROTATE_RANGE","offsetX","offsetY","rotateY","rotateX","console","log","style","transform"],"mappings":";AAAA,IAAMA,EAAeC,SAASC,cAAc,0BACtCC,EAAgBF,SAASC,cAAc,2BAEvCE,EAAe,KACfC,EAAe,GACfC,EAAU,CAAEC,EAAGP,EAAaQ,wBAAwBC,KAAOL,EAAcM,EAAGV,EAAaQ,wBAAwBG,IAAMN,GACvHO,EAAkBN,EAClBO,EAAW,CAAEN,EAAGJ,EAAcK,wBAAwBC,KAAOL,EAAcM,EAAGP,EAAcK,wBAAwBG,IAAMN,GAC1HS,EAAmBD,EACnBE,EAAQ,CAAER,EAAG,EAAGG,EAAG,GACrBM,GAAQ,EAENC,EAAY,SAACC,EAAGC,GACrBJ,EAAMR,EAAIW,EAAEE,QACZL,EAAML,EAAIQ,EAAEG,QACZC,sBAAsBH,IAGjBI,EAAe,WACpBP,GAAQ,EACRhB,EAAawB,iBAAiB,YAAa,SAACN,GAAMD,OAAAA,EAAUC,EAAGO,KAC/DtB,EAAcqB,iBAAiB,YAAa,SAACN,GAAMD,OAAAA,EAAUC,EAAGQ,MA8BjE,SAASC,IACRrB,EAAQC,EAAIP,EAAaQ,wBAAwBC,KAAOL,EACxDE,EAAQI,EAAIV,EAAaQ,wBAAwBG,IAAMN,EACvDQ,EAASN,EAAIJ,EAAcK,wBAAwBC,KAAOL,EAC1DS,EAASH,EAAIP,EAAcK,wBAAwBG,IAAMN,EA/B1DL,EAAawB,iBAAiB,YAAaD,GAC3CpB,EAAcqB,iBAAiB,YAAaD,GAE5CvB,EAAawB,iBAAiB,UAAW,WACxCR,GAAQ,EACRhB,EAAa4B,oBAAoB,YAAa,SAACV,GAAMD,OAAAA,EAAUC,EAAGO,KAClEH,sBAAsBG,KAGvBtB,EAAcqB,iBAAiB,UAAW,WACzCR,GAAQ,EACRb,EAAcyB,oBAAoB,YAAa,SAACV,GAAMD,OAAAA,EAAUC,EAAGQ,KACnEJ,sBAAsBI,KAGvB1B,EAAawB,iBAAiB,WAAY,WACzCR,GAAQ,EACRhB,EAAa4B,oBAAoB,YAAa,SAACV,GAAMD,OAAAA,EAAUC,EAAGO,KAClEH,sBAAsBG,KAGvBtB,EAAcqB,iBAAiB,WAAY,WAC1CR,GAAQ,EACRb,EAAcyB,oBAAoB,YAAa,SAACV,GAAMD,OAAAA,EAAUC,EAAGQ,KACnEJ,sBAAsBI,KAUvB,IAAMG,EAAQ,EACRC,EAAe,IAErB,SAASL,IACJT,GAAAA,EAAO,CACJe,IAAAA,GAAWzB,EAAQC,EAAIQ,EAAMR,IAAMsB,EACnCG,GAAW1B,EAAQI,EAAIK,EAAML,IAAMmB,EACnCI,EAAUF,EAAUD,EACpBI,EAAUF,GAAWF,EAC3BK,QAAQC,IAAI,KAAMF,EAAS,KAAMD,GACjCjC,EAAaqC,MAAMC,UAA0BP,cAAAA,OAAAA,EAAyBC,mBAAAA,OAAAA,EAAsBC,gBAAAA,OAAAA,EAAuBC,iBAAAA,OAAAA,EAAnH,6BAEAP,SAEA3B,EAAaqC,MAAMC,UAAY,GAC/BhC,EAAQC,EAAIK,EAAgBL,EAC5BD,EAAQI,EAAIE,EAAgBF,EAI9B,SAASgB,IACJV,GAAAA,EAAO,CACJe,IAAAA,IAAYlB,EAASN,EAAIQ,EAAMR,GAAKsB,EACpCG,IAAYnB,EAASH,EAAIK,EAAML,GAAKmB,EACpCI,EAAUF,EAAUD,EACpBI,EAAUF,GAAWF,EAC3BK,QAAQC,IAAI,KAAMF,EAAS,KAAMD,GACjC9B,EAAckC,MAAMC,UAA0BP,cAAAA,OAAAA,EAAyBC,mBAAAA,OAAAA,EAAsBC,gBAAAA,OAAAA,EAAuBC,iBAAAA,OAAAA,EAApH,6BACAP,SAEAxB,EAAckC,MAAMC,UAAY,GAChCzB,EAASN,EAAIO,EAAiBP,EAC9BM,EAASH,EAAII,EAAiBJ","file":"js.ebc2dac9.js","sourceRoot":"../src","sourcesContent":["const leftJoystick = document.querySelector('.left-joycon .joystick');\nconst rightJoystick = document.querySelector('.right-joycon .joystick');\n\nconst CIR_OFFSET_X = 35.5;\nconst CIR_OFFSET_Y = 40;\nconst leftJoy = { x: leftJoystick.getBoundingClientRect().left + CIR_OFFSET_X, y: leftJoystick.getBoundingClientRect().top + CIR_OFFSET_Y };\nconst LEFT_ORIGIN_JOY = leftJoy;\nconst rightJoy = { x: rightJoystick.getBoundingClientRect().left + CIR_OFFSET_X, y: rightJoystick.getBoundingClientRect().top + CIR_OFFSET_Y };\nconst RIGHT_ORIGIN_JOY = rightJoy;\nconst mouse = { x: 0, y: 0 };\nlet thumb = false;\n\nconst mouseMove = (e, update) => {\n\tmouse.x = e.clientX;\n\tmouse.y = e.clientY;\n\trequestAnimationFrame(update);\n};\n\nconst addMouseMove = () => {\n\tthumb = true;\n\tleftJoystick.addEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trightJoystick.addEventListener('mousemove', (e) => mouseMove(e, updateRight));\n};\n\nleftJoystick.addEventListener('mousedown', addMouseMove);\nrightJoystick.addEventListener('mousedown', addMouseMove);\n\nleftJoystick.addEventListener('mouseup', () => {\n\tthumb = false;\n\tleftJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trequestAnimationFrame(updateLeft);\n});\n\nrightJoystick.addEventListener('mouseup', () => {\n\tthumb = false;\n\trightJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateRight));\n\trequestAnimationFrame(updateRight);\n});\n\nleftJoystick.addEventListener('mouseout', () => {\n\tthumb = false;\n\tleftJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateLeft));\n\trequestAnimationFrame(updateLeft);\n});\n\nrightJoystick.addEventListener('mouseout', () => {\n\tthumb = false;\n\trightJoystick.removeEventListener('mousemove', (e) => mouseMove(e, updateRight));\n\trequestAnimationFrame(updateRight);\n});\n\nfunction updateJoy () {\n\tleftJoy.x = leftJoystick.getBoundingClientRect().left + CIR_OFFSET_X;\n\tleftJoy.y = leftJoystick.getBoundingClientRect().top + CIR_OFFSET_Y;\n\trightJoy.x = rightJoystick.getBoundingClientRect().left + CIR_OFFSET_X;\n\trightJoy.y = rightJoystick.getBoundingClientRect().top + CIR_OFFSET_Y;\n}\n\nconst RANGE = 2;\nconst ROTATE_RANGE = 2.5;\n\nfunction updateLeft () {\n\tif (thumb) {\n\t\tconst offsetX = (leftJoy.x - mouse.x) / -RANGE;\n\t\tconst offsetY = (leftJoy.y - mouse.y) / -RANGE;\n\t\tconst rotateY = offsetX * ROTATE_RANGE;\n\t\tconst rotateX = offsetY * -ROTATE_RANGE;\n\t\tconsole.log('y:', rotateX, 'x:', rotateY);\n\t\tleftJoystick.style.transform = `translateX(${offsetX}px) translateY(${offsetY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) perspective(5000rem)`;\n\n\t\tupdateJoy();\n\t} else {\n\t\tleftJoystick.style.transform = '';\n\t\tleftJoy.x = LEFT_ORIGIN_JOY.x;\n\t\tleftJoy.y = LEFT_ORIGIN_JOY.y;\n\t}\n}\n\nfunction updateRight () {\n\tif (thumb) {\n\t\tconst offsetX = -(rightJoy.x - mouse.x) / RANGE;\n\t\tconst offsetY = -(rightJoy.y - mouse.y) / RANGE;\n\t\tconst rotateY = offsetX * ROTATE_RANGE;\n\t\tconst rotateX = offsetY * -ROTATE_RANGE;\n\t\tconsole.log('y:', rotateX, 'x:', rotateY);\n\t\trightJoystick.style.transform = `translateX(${offsetX}px) translateY(${offsetY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg) perspective(5000rem)`;\n\t\tupdateJoy();\n\t} else {\n\t\trightJoystick.style.transform = '';\n\t\trightJoy.x = RIGHT_ORIGIN_JOY.x;\n\t\trightJoy.y = RIGHT_ORIGIN_JOY.y;\n\t}\n}\n"]}